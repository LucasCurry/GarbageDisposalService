<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml" xmlns:sec="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/js/bootstrap.bundle.min.js" integrity="sha384-qKXV1j0HvMUeCBQ+QVp7JcfGl760yU08IQ+GpUo5hlbpg51QRiuqHAJz8+BrxE/N" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="/css/style.css">
    <link rel="icon" type="image/x-icon" href="/images/garbage-truck.png">
</head>
<body>
<nav><h1><a href="/">ShitMustGo</a></h1>

    <ul class="navbar">
        <li> <a href="/">Home</a> </li>
        <li sec:authorize="!isAuthenticated()"> <a href="/login">Sign in/Sign up</a> </li>
        <li> <a href="/contact">Contact</a> </li>
        <li> <a href="/faq">FAQ</a> </li>
        <li sec:authorize="isAuthenticated()"><a href="/account">Account</a></li>
        <li sec:authorize="hasRole('ADMIN')">
            <form th:action="@{/logout}" method="POST" >
                <input type="submit" value="Logout">
            </form>
        </li>
    </ul>
</nav>

<div class="accountWel">

    <h2 th:text="'Välkommen ' + ${account}">Välkommen</h2>

    <a href="/account/create"><button>Create Task</button></a>
    <a th:href="'/account/' + ${accountId} + '/deleteUser'"><button>Delete account</button></a>

</div>
<p>Dina jobb:</p>
<div class="tasks">


    <article class="task" th:each="task : ${task}">
        <p th:if="${task.bookedId != null && !task.isAccepted}">Du har en bokning</p>
        <p th:if="${task.isAccepted}">Uppdraget är under utförande</p>
        <form th:if="${task.bookedId != null && !task.isAccepted}" action="/decline" method="post">
            <button th:value="${task.id}" name="id2" type="submit" formaction="/accept">Accept</button>
        <button th:value="${task.id}" name="id" type="submit">Decline</button>
        </form>
        <tr>

        <th><a th:href="'/task/' + ${task.id}" th:text="${task.title}"></a></th>
        <th th:text="${task.address}"></th>
        <th th:text="${task.price}"></th>
        <a th:href="'/task/' + ${task.id}"><img th:class="img" th:src="${task.image}" alt=""></a>
        <a th:href="'/account/'+${task.id}+'/delete'"><input type="submit" value="Delete"></a>
    </tr>
    </article>

</div>
<p>Bokade jobb:</p>
<div class="tasks">

    <article class="task" th:each="task : ${bookedTask}">
        <p th:if="${task.isAccepted}">Uppdrag är Accepterat</p>
        <a><p th:if="${task.isAccepted}">Går till uppdrag för mer info</p></a>
        <tr>
            <th><a th:href="'/task/' + ${task.id}" th:text="${task.title}"></a></th>
            <th th:text="${task.address}"></th>
            <th th:text="${task.price}"></th>
            <a th:href="'/task/' + ${task.id}"><img th:class="img" th:src="${task.image}" alt=""></a>
            <a th:href="'/account/'+${task.id}+'/avboka'"><input type="submit" value="Avboka"></a>
        </tr>
    </article>
</div>

</body>
</html>